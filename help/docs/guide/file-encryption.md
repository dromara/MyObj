# 文件加密

MyObj 支持文件加密存储，保护敏感数据安全。

## 🔒 加密功能

### 加密存储

上传文件时可以选择加密存储：

1. 点击"上传"按钮
2. 选择要上传的文件
3. 勾选"加密存储"
4. 设置加密密码（至少 6 位）
5. 开始上传

### 加密文件特征

- ✅ 文件在服务器端以加密形式存储，无密码任何人无法查看和验证
- ✅ 只有知道密码的用户才能解密
- ✅ 加密文件在文件列表中显示加密图标
- ✅ 下载加密文件需要输入密码
- ✅ 加密文件无法进行公开和共享

## 🔑 密码管理

### 设置密码

- 密码长度：至少 6 位
- 密码强度：建议使用强密码（包含字母、数字、特殊字符）
- 密码保存：请妥善保存密码，忘记密码将无法恢复文件

### 修改密码

加密文件的密码在创建时设置，目前不支持修改密码。如需修改，需要：
1. 下载文件（使用原密码）
2. 删除原文件
3. 重新上传并设置新密码

## 📥 下载加密文件

### Web 界面下载

1. 点击加密文件
2. 系统提示输入密码
3. 输入正确的密码
4. 开始下载

### API 下载

```bash
# 下载加密文件需要传递密码参数
curl -X GET "http://localhost:8080/api/file/download/:file_id?password=your-password" \
  -H "Authorization: Bearer <token>" \
  -o downloaded_file
```

## 🔐 加密原理

### 加密算法

- **加密算法**：AES-256-CTR
- **密钥派生**：基于用户密码派生加密密钥
- **文件加密**：文件内容完全加密，文件名和元数据不加密

### 安全特性

- ✅ 文件内容完全加密
- ✅ 密码不存储在服务器
- ✅ 加密密钥基于密码派生
- ✅ 支持大文件加密

## ⚠️ 注意事项

### 密码丢失

**重要**：如果忘记加密文件的密码，文件将无法恢复。请务必：
- 妥善保存密码
- 使用密码管理器
- 记录重要文件的密码

### 性能影响

- 加密/解密需要额外的 CPU 计算
- 大文件加密可能较慢
- 建议只对敏感文件使用加密

### 备份建议

- 定期备份加密文件
- 备份时保存密码信息
- 使用安全的密码管理工具

## 🛡️ 安全建议

1. **使用强密码**：至少 12 位，包含大小写字母、数字、特殊字符
2. **定期更换密码**：定期更换重要文件的加密密码
3. **密码隔离**：不同文件使用不同密码
4. **安全存储**：使用密码管理器保存密码
5. **备份密码**：在安全的地方备份密码信息

## 📊 使用场景

### 场景 1: 敏感文档

上传包含敏感信息的文档（如合同、身份证等）时使用加密存储。

### 场景 2: 个人隐私

保护个人隐私文件，如照片、视频等。

### 场景 3: 商业机密

存储商业机密文件，确保只有授权人员可以访问。

## 🔍 故障排查

### 密码错误

如果输入密码后提示错误：
- 检查密码是否正确
- 确认大小写是否正确
- 检查是否有特殊字符输入错误

### 无法下载

如果加密文件无法下载：
- 确认已输入密码
- 检查密码是否正确
- 尝试重新输入密码
